<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>neuronephys_v2: C:/Users/james hazelden/Desktop/HFSP/neuronephys_v2/coupling_speed_test/graphics.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">neuronephys_v2
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">C:/Users/james hazelden/Desktop/HFSP/neuronephys_v2/coupling_speed_test/graphics.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="graphics_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno"><a class="line" href="graphics_8cpp.html#a525335710b53cb064ca56b936120431e">    1</a></span>&#160;<span class="preprocessor">#define _USE_MATH_DEFINES</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="graphics_8h.html">graphics.h</a>&quot;</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160; </div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &lt;GL/glew.h&gt;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;GLFW/glfw3.h&gt;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno"><a class="line" href="graphics_8cpp.html#a816ab7d5c2ce1f0a01216042837beb93">    6</a></span>&#160;<span class="preprocessor">#define GLM_FORCE_RADIANS</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;glm/glm.hpp&gt;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;glm/ext.hpp&gt;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &lt;glm/gtc/matrix_transform.hpp&gt;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &lt;glm/gtc/type_ptr.hpp&gt;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &lt;fstream&gt;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;random&gt;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160; </div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160; </div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="keyword">using namespace </span>std;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160; </div>
<div class="line"><a name="l00021"></a><span class="lineno"><a class="line" href="namespace_graphics.html">   21</a></span>&#160;<span class="keyword">namespace </span><a class="code" href="namespace_graphics.html">Graphics</a> </div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;{</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160; </div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">// Circle buffer struct used for replaying recent frames</span></div>
<div class="line"><a name="l00025"></a><span class="lineno"><a class="line" href="struct_graphics_1_1_replay_buffer.html">   25</a></span>&#160;<span class="keyword">struct </span><a class="code" href="struct_graphics_1_1_replay_buffer.html">ReplayBuffer</a> </div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;{</div>
<div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="struct_graphics_1_1_replay_buffer.html#a1f3def10bdd64dff2ad1ee87f155bcb4">   27</a></span>&#160;    std::vector&lt;GLfloat&gt; <a class="code" href="struct_graphics_1_1_replay_buffer.html#a1f3def10bdd64dff2ad1ee87f155bcb4">voltage_buff</a>;</div>
<div class="line"><a name="l00028"></a><span class="lineno"><a class="line" href="struct_graphics_1_1_replay_buffer.html#a02f0a279393cf762d54c3da0bf044946">   28</a></span>&#160;    GLint frame_idx{ 0 }, frame_rewind_idx{ 0 };</div>
<div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="struct_graphics_1_1_replay_buffer.html#a8f3082352560c436e00740cd0768060c">   29</a></span>&#160;    GLint num_frames{ 0 }, frame_size{ 0 };</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    </div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="struct_graphics_1_1_replay_buffer.html#a3f4d1d2dd51347e1d14d5d96449b0be3">   31</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="struct_graphics_1_1_replay_buffer.html#a3f4d1d2dd51347e1d14d5d96449b0be3">init</a> (GLint N, GLint frame_cache_count)</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    {</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;        frame_idx = 0;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;        frame_rewind_idx = 0;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;        num_frames = frame_cache_count;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;        frame_size = N;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160; </div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;        <span class="comment">// Allocate frame_cache_count frames for replay</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        <a class="code" href="namespace_graphics.html#ad3011b92c61f085457eb9c325f12b8ee">voltage_buff</a>.resize(N * frame_cache_count);</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    }</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160; </div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="struct_graphics_1_1_replay_buffer.html#ab30124032828aec9c5f1042d16316e78">   42</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="struct_graphics_1_1_replay_buffer.html#ab30124032828aec9c5f1042d16316e78">write_frame</a>(<span class="keywordtype">float</span> <span class="keyword">const</span>* <a class="code" href="namespace_graphics.html#aeac6d0338cc1cfdb0b4c83742bf25479">voltages</a>)</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    {</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        frame_rewind_idx = frame_idx; <span class="comment">// Set to index of previous frame</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        std::copy(<a class="code" href="namespace_graphics.html#aeac6d0338cc1cfdb0b4c83742bf25479">voltages</a>, <a class="code" href="namespace_graphics.html#aeac6d0338cc1cfdb0b4c83742bf25479">voltages</a> + frame_size, <a class="code" href="namespace_graphics.html#ad3011b92c61f085457eb9c325f12b8ee">voltage_buff</a>.begin() + frame_idx * frame_size);</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        frame_idx = (frame_idx + 1) % num_frames; <span class="comment">// Circle around </span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    }</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; </div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="struct_graphics_1_1_replay_buffer.html#a451d03012ea2f7a2858a8ba96084869d">   49</a></span>&#160;    <span class="keyword">const</span> GLfloat* <a class="code" href="struct_graphics_1_1_replay_buffer.html#a451d03012ea2f7a2858a8ba96084869d">read_frame</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="keyword">    </span>{</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespace_graphics.html#ad3011b92c61f085457eb9c325f12b8ee">voltage_buff</a>.data() + frame_rewind_idx * frame_size;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    }</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="struct_graphics_1_1_replay_buffer.html#a1bb0f5f7fa5a5919f8ae2b453c11c276">   54</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="struct_graphics_1_1_replay_buffer.html#a1bb0f5f7fa5a5919f8ae2b453c11c276">move_N_frames</a>(<span class="keywordtype">int</span> N) <span class="comment">// N can be positive or negative</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    {</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        <span class="comment">// Clamp frame_rewind_idx + N to range [0, frame_idx].</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        frame_rewind_idx = min(max(frame_rewind_idx + N, 0), frame_idx);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    }</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;};</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="keyword">struct </span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;{</div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="namespace_graphics.html#a926548a0197979d6a1b32141bc150df7">   63</a></span>&#160;    GLuint <a class="code" href="namespace_graphics.html#a926548a0197979d6a1b32141bc150df7">vao</a>;</div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="namespace_graphics.html#abd7a23a5907242aebce938e7f25d8742">   64</a></span>&#160;    GLint <a class="code" href="namespace_graphics.html#a6fae45b0ee3e217458c0660d79df963d">width</a>, <a class="code" href="namespace_graphics.html#abd7a23a5907242aebce938e7f25d8742">height</a>;</div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="namespace_graphics.html#ad6a7e8662921598c7d8441ea97d19e56">   65</a></span>&#160;    std::string <a class="code" href="namespace_graphics.html#ad6a7e8662921598c7d8441ea97d19e56">title</a>;</div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="namespace_graphics.html#a0411bf5e304baaf3df72555018c26e6e">   66</a></span>&#160;    GLuint <a class="code" href="namespace_graphics.html#a0411bf5e304baaf3df72555018c26e6e">shaderProgram</a>, <a class="code" href="namespace_graphics.html#a020afe678b17fb21faf7042a9e2e28f2">tex_shaderProgram</a>;</div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="namespace_graphics.html#a7add95f36038e655dea6e2213f4533ef">   67</a></span>&#160;    GLuint <a class="code" href="namespace_graphics.html#a7add95f36038e655dea6e2213f4533ef">texture</a>;</div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="namespace_graphics.html#a2c4e01da45cd9ecd71abc55a7c465db7">   68</a></span>&#160;    GLFWwindow* <a class="code" href="namespace_graphics.html#a2c4e01da45cd9ecd71abc55a7c465db7">window</a>;</div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="namespace_graphics.html#a185ddee13790b94dd8edbb02eb0d7720">   69</a></span>&#160;    glm::vec3 <a class="code" href="namespace_graphics.html#a185ddee13790b94dd8edbb02eb0d7720">cam_pos</a>;</div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="namespace_graphics.html#acef47ff2fb5bb5de0df186a57b236947">   70</a></span>&#160;    glm::mat4 <a class="code" href="namespace_graphics.html#aea7ddd4a13b7d44d6563501e86ee80cc">view</a>{ glm::mat4(1.0f) }, <a class="code" href="namespace_graphics.html#acef47ff2fb5bb5de0df186a57b236947">model</a>{ glm::mat4(1.0f) }, <a class="code" href="namespace_graphics.html#aeb133f8d106cd2c94bcc69d2cb9f559d">projection</a>{ glm::mat4(1.0f) };</div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="namespace_graphics.html#ab9b7d01516fea5a69f0082a9a7aa4602">   71</a></span>&#160;    glm::vec2 <a class="code" href="namespace_graphics.html#ab9b7d01516fea5a69f0082a9a7aa4602">mouse</a>{0.0f, 0.0f};</div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="namespace_graphics.html#a0920e10e3618cd0f9b0bc786dd02050f">   72</a></span>&#160;    glm::vec2 <a class="code" href="namespace_graphics.html#a0920e10e3618cd0f9b0bc786dd02050f">theta</a>{0.0f, 0.0f};</div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="namespace_graphics.html#aee9d5e3358172aa7708ed2619fa13b03">   73</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="namespace_graphics.html#aee9d5e3358172aa7708ed2619fa13b03">pause</a>{ <span class="keyword">false</span> }, <a class="code" href="namespace_graphics.html#aee40062a09c568db2ef73f402d6c0207">rotate</a>{ <span class="keyword">true</span> }, <a class="code" href="namespace_graphics.html#a7955aba28102ad572e43724f8b368860">replay</a>{ <span class="keyword">false</span> };</div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="namespace_graphics.html#aaac526707d0445cd43be73708b318d91">   74</a></span>&#160;    glm::vec3 <a class="code" href="namespace_graphics.html#adeac8ca48fc961dc219ee5e6dbdd95f5">world_min</a>, <a class="code" href="namespace_graphics.html#aaac526707d0445cd43be73708b318d91">world_max</a>;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="namespace_graphics.html#a5ce068520d6baf26424579751773dadf">   76</a></span>&#160;    <a class="code" href="struct_graphics_1_1_replay_buffer.html">ReplayBuffer</a> <a class="code" href="namespace_graphics.html#a5ce068520d6baf26424579751773dadf">replay_buffer</a>; <span class="comment">// Used for replaying video </span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="comment">// Locations of stuff</span></div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="namespace_graphics.html#a708ace3d70b94657d9f603134cf99bd8">   79</a></span>&#160;    GLint <a class="code" href="namespace_graphics.html#a9b1323ae2d49ae44378a3c5de5b5ad82">voltage_loc</a>, <a class="code" href="namespace_graphics.html#a708ace3d70b94657d9f603134cf99bd8">pos_loc</a>, <a class="code" href="namespace_graphics.html#a25de7c3762e3f43795930ff04caef37a">tex_coord_loc</a>; <span class="comment">// attributes </span></div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="namespace_graphics.html#acf2724be7a18e8148883bb0629e5ca3c">   80</a></span>&#160;    GLint <a class="code" href="namespace_graphics.html#a1ca24fa11525e0f65df6892fedb19eee">p_mat_loc</a>, <a class="code" href="namespace_graphics.html#ad0df1f87f07a495f173209798489ac3c">v_mat_loc</a>, <a class="code" href="namespace_graphics.html#acf2724be7a18e8148883bb0629e5ca3c">m_mat_loc</a>, <a class="code" href="namespace_graphics.html#a298e89da0de163d5082b5cd9181afbe6">sampler_loc</a>; <span class="comment">// uniforms</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="namespace_graphics.html#a5541197fd0e01b42659f7f2594ed61de">   82</a></span>&#160;    GLuint <a class="code" href="namespace_graphics.html#a5541197fd0e01b42659f7f2594ed61de">pos_buff</a>, <a class="code" href="namespace_graphics.html#ad3011b92c61f085457eb9c325f12b8ee">voltage_buff</a>, <a class="code" href="namespace_graphics.html#aeee17015cfc742e0670bae836aa799b6">tex_coord_buff</a>;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="namespace_graphics.html#a07250250044387fd398c3bec897a167a">   84</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespace_graphics.html#a07250250044387fd398c3bec897a167a">raw_video_frame_idx</a> = 0;</div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="namespace_graphics.html#a8cc2b613e01468cd06738e6aabfbb233">   85</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespace_graphics.html#a8cc2b613e01468cd06738e6aabfbb233">max_raw_video_size_gb</a> = 10;</div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="namespace_graphics.html#adeec2db5ee6c6115b9717d264566a7ea">   86</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespace_graphics.html#adeec2db5ee6c6115b9717d264566a7ea">mov_video_idx</a> = 0;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="comment">// Application-specific stuff</span></div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="namespace_graphics.html#aeac6d0338cc1cfdb0b4c83742bf25479">   89</a></span>&#160;    vector&lt;GLfloat&gt; <a class="code" href="namespace_graphics.html#aeac6d0338cc1cfdb0b4c83742bf25479">voltages</a>;</div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="namespace_graphics.html#a542e7802c7ba028558c021006594dd77">   90</a></span>&#160;    vector&lt;glm::vec3&gt; <a class="code" href="namespace_graphics.html#a542e7802c7ba028558c021006594dd77">points</a>;</div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="namespace_graphics.html#a85781c7fcd6555318df976123c7e1531">   91</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespace_graphics.html#a85781c7fcd6555318df976123c7e1531">slice_index</a>{ 0 };</div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">   92</a></span>&#160;} <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="namespace_graphics.html#a3f80ec74ff32a99c69e3a1a1d58445c4">   94</a></span>&#160;GLuint <a class="code" href="namespace_graphics.html#a3f80ec74ff32a99c69e3a1a1d58445c4">loadInShader</a>(GLenum <span class="keyword">const</span> &amp;shaderType, <span class="keywordtype">char</span> <span class="keyword">const</span> *fname) {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;   std::vector&lt;char&gt; buffer;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;   std::ifstream in;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;   in.open(fname, std::ios::binary);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;   <span class="keywordflow">if</span> (in.is_open()) {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      in.seekg(0, std::ios::end);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;      <span class="keywordtype">size_t</span> <span class="keyword">const</span> &amp;length = in.tellg();</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;      in.seekg(0, std::ios::beg);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      buffer.resize(length + 1);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;      in.read(&amp;buffer[0], length);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;      in.close();</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      buffer[length] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;   } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      std::cerr &lt;&lt; <span class="stringliteral">&quot;Unable to open &quot;</span> &lt;&lt; fname &lt;&lt; std::endl;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      exit(-1);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;   }</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;   GLchar <span class="keyword">const</span> *src = &amp;buffer[0];</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160; </div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;   GLuint shader = glCreateShader(shaderType);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;   glShaderSource(shader, 1, &amp;src, NULL);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;   glCompileShader(shader);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;   GLint test;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;   glGetShaderiv(shader, GL_COMPILE_STATUS, &amp;test);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160; </div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;   <span class="keywordflow">if</span> (!test) {</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      std::cerr &lt;&lt; <span class="stringliteral">&quot;Shader compilation failed with this message:&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      std::vector&lt;char&gt; compilationLog(512);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      glGetShaderInfoLog(shader, compilationLog.size(), NULL, &amp;compilationLog[0]);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      std::cerr &lt;&lt; &amp;compilationLog[0] &lt;&lt; std::endl;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      glfwTerminate();</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      exit(-1);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;   }</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;   <span class="keywordflow">return</span> shader;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;}</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="namespace_graphics.html#a85f34bbe6b3225c4ba15bf9b5b961da8">  134</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespace_graphics.html#a85f34bbe6b3225c4ba15bf9b5b961da8">initShaders</a> (<span class="keywordtype">char</span> <span class="keyword">const</span>* vertLoc, <span class="keywordtype">char</span> <span class="keyword">const</span>* fragLoc, GLuint&amp; shader_prog)</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;{   </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    shader_prog = glCreateProgram();</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keyword">auto</span> vertShader = <a class="code" href="namespace_graphics.html#a3f80ec74ff32a99c69e3a1a1d58445c4">loadInShader</a>(GL_VERTEX_SHADER, vertLoc);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keyword">auto</span> fragShader = <a class="code" href="namespace_graphics.html#a3f80ec74ff32a99c69e3a1a1d58445c4">loadInShader</a>(GL_FRAGMENT_SHADER, fragLoc);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    glAttachShader(shader_prog, vertShader);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    glAttachShader(shader_prog, fragShader);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    glDeleteShader(vertShader);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    glDeleteShader(fragShader);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    glLinkProgram(shader_prog);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;}</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="namespace_graphics.html#a8f249fa225e018430ea622e24c50da10">  150</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespace_graphics.html#a8f249fa225e018430ea622e24c50da10">startup</a> (GLfloat <span class="keyword">const</span>&amp; <a class="code" href="namespace_graphics.html#a6fae45b0ee3e217458c0660d79df963d">width</a>, GLfloat <span class="keyword">const</span>&amp; <a class="code" href="namespace_graphics.html#abd7a23a5907242aebce938e7f25d8742">height</a>, <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="namespace_graphics.html#ad6a7e8662921598c7d8441ea97d19e56">title</a>=<span class="stringliteral">&quot;Untitled Window&quot;</span>)</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;{   </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.width = <a class="code" href="namespace_graphics.html#a6fae45b0ee3e217458c0660d79df963d">width</a>; </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.height = <a class="code" href="namespace_graphics.html#abd7a23a5907242aebce938e7f25d8742">height</a>;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160; </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordflow">if</span>(!glfwInit()) {</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        std::cerr&lt;&lt;<span class="stringliteral">&quot;failed to initialize glfw&quot;</span>&lt;&lt;std::endl;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        exit(1);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    }</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    glfwWindowHint(GLFW_OPENGL_FORWARD_COMPAT, GL_TRUE);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, 3);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, 2);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.title = <a class="code" href="namespace_graphics.html#ad6a7e8662921598c7d8441ea97d19e56">title</a>;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.window = glfwCreateWindow(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.width, <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.height, <a class="code" href="namespace_graphics.html#ad6a7e8662921598c7d8441ea97d19e56">title</a>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.window) {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        std::cerr&lt;&lt;<span class="stringliteral">&quot;failed to initialize window&quot;</span>&lt;&lt;std::endl;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        exit(1);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    }</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    glfwMakeContextCurrent(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.window);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160; </div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    glewExperimental = GL_TRUE;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">if</span>(glewInit() != 0) {</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        std::cerr&lt;&lt;<span class="stringliteral">&quot;failed to initialize glew&quot;</span>&lt;&lt;std::endl;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        exit(1);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    }</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    glGetError(); <span class="comment">// We get an INVALID_ENUM error from glew sometimes.</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="comment">// It&#39;s not a problem. Just wipe the error checking</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;}</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; </div>
<div class="line"><a name="l00180"></a><span class="lineno"><a class="line" href="namespace_graphics.html#a7d5b0e2f900f864820c9e1c2bcf5f309">  180</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespace_graphics.html#a7d5b0e2f900f864820c9e1c2bcf5f309">shutdown</a> () </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;{   </div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    glDeleteVertexArrays(1, &amp;<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.vao);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    glDeleteProgram(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.shaderProgram);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;}</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160; </div>
<div class="line"><a name="l00186"></a><span class="lineno"><a class="line" href="namespace_graphics.html#af3b5a4f3a72653f853b19da001e8356e">  186</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespace_graphics.html#af3b5a4f3a72653f853b19da001e8356e">render</a> (<span class="keywordtype">float</span> <span class="keyword">const</span>* <a class="code" href="namespace_graphics.html#aeac6d0338cc1cfdb0b4c83742bf25479">voltages</a>, <span class="keywordtype">void</span> <span class="keyword">const</span>* slice, <span class="keywordtype">int</span> <span class="keyword">const</span> slice_width, <span class="keywordtype">int</span> <span class="keyword">const</span> slice_height, <span class="keywordtype">bool</span>&amp; <a class="code" href="namespace_graphics.html#aee9d5e3358172aa7708ed2619fa13b03">pause</a>)</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;{   </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">if</span>(glfwWindowShouldClose(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.window))</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// Done!</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160; </div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.replay)</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <a class="code" href="namespace_graphics.html#aeac6d0338cc1cfdb0b4c83742bf25479">voltages</a> = <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.replay_buffer.read_frame();</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    glBindBuffer(GL_ARRAY_BUFFER, <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.voltage_buff);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.pause || <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.replay) <span class="comment">// Only update voltages during replay or when not paused. </span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        glBufferData(GL_ARRAY_BUFFER,</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.voltages.size() * <span class="keyword">sizeof</span>(GLfloat),</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            <a class="code" href="namespace_graphics.html#aeac6d0338cc1cfdb0b4c83742bf25479">voltages</a>,</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            GL_DYNAMIC_DRAW);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    }</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    GLfloat <span class="keyword">const</span> color[4]{ 0.0f, 0.0f, 0.0f, 1.0f };</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    glClearBufferfv(GL_COLOR, 0.0f, color);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    glClear(GL_DEPTH_BUFFER_BIT);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespace_graphics.html#aee9d5e3358172aa7708ed2619fa13b03">pause</a>) <span class="comment">// if paused, allow user to rotate object around.</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <span class="keywordtype">double</span> xpos, ypos;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        glfwGetCursorPos(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.window, &amp;xpos, &amp;ypos);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <span class="comment">//    glfwSetCursorPos(g_attrs.window, g_attrs.width/2, g_attrs.height/2);</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        glm::vec2 <a class="code" href="namespace_graphics.html#ab9b7d01516fea5a69f0082a9a7aa4602">mouse</a>{</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            xpos - <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.width / 2,</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.height / 2 - ypos</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        };</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.theta = 0.001f * (<a class="code" href="namespace_graphics.html#ab9b7d01516fea5a69f0082a9a7aa4602">mouse</a> - <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.mouse);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.model = <a class="code" href="namespace_graphics.html#aee40062a09c568db2ef73f402d6c0207">glm::rotate</a>(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.model, <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.theta.x, glm::vec3(0.0f, 1.0f, 0.0f));</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.model = <a class="code" href="namespace_graphics.html#aee40062a09c568db2ef73f402d6c0207">glm::rotate</a>(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.model, <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.theta.y, glm::vec3(1.0f, 0.0f, 0.0f));</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.mouse = <a class="code" href="namespace_graphics.html#ab9b7d01516fea5a69f0082a9a7aa4602">mouse</a>;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.rotate)</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="keyword">auto</span> rot_mat = <a class="code" href="namespace_graphics.html#aee40062a09c568db2ef73f402d6c0207">glm::rotate</a>(glm::mat4(1.0f), 0.003f, glm::vec3(0.0, 1.0, 0.0));</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.cam_pos = glm::vec3(rot_mat * glm::vec4(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.cam_pos, 1.0f));</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.view *= rot_mat;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    }</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="comment">// Bind voltage buffer and enable voltage attribute</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    glEnableVertexAttribArray(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.pos_loc);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    glUseProgram(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.shaderProgram);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    glBindBuffer(GL_ARRAY_BUFFER, <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.voltage_buff);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    glVertexAttribPointer(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.voltage_loc, 1, GL_FLOAT, GL_FALSE, <span class="keyword">sizeof</span>(GLfloat), NULL);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    glEnableVertexAttribArray(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.voltage_loc);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160; </div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="comment">// Render neurons</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    glUniformMatrix4fv(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.p_mat_loc, 1, GL_FALSE, glm::value_ptr(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.projection));</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    glUniformMatrix4fv(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.m_mat_loc, 1, GL_FALSE, glm::value_ptr(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.model));</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    glUniformMatrix4fv(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.v_mat_loc, 1, GL_FALSE, glm::value_ptr(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.view));</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    glDrawArrays(GL_POINTS, 0, <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.points.size());</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="comment">// Render texture</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordflow">if</span>(slice)</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.slice_index %= slice_width;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        glDisableVertexAttribArray(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.voltage_loc);</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160; </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <span class="comment">// Disable voltage attribute and enable tex_coords attribute</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        glDisableVertexAttribArray(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.pos_loc);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        glDisableVertexAttribArray(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.voltage_loc);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        glUseProgram(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.tex_shaderProgram);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160; </div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        glActiveTexture(GL_TEXTURE0);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        glBindTexture(GL_TEXTURE_2D, <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.texture);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        glTexImage2D(GL_TEXTURE_2D, 0, GL_RED, slice_width, slice_height, 0, GL_RED, GL_FLOAT, slice);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        glUniform1i(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.sampler_loc, 0);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160; </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <span class="keywordtype">float</span> z_off{ (<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.slice_index / (GLfloat)slice_width) * (<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.world_max.z - <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.world_min.z) };</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        glm::mat4x4 tex_model_mat = <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.model * glm::translate(glm::mat4x4(1.0f), glm::vec3(0.0f, 0.0f, z_off));</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        glUniformMatrix4fv(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.p_mat_loc, 1, GL_FALSE, glm::value_ptr(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.projection));</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        glUniformMatrix4fv(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.m_mat_loc, 1, GL_FALSE, glm::value_ptr(tex_model_mat));</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        glUniformMatrix4fv(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.v_mat_loc, 1, GL_FALSE, glm::value_ptr(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.view));</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        glDrawArrays(GL_TRIANGLES, 0, 6); </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    }</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160; </div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    glfwPollEvents();</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    glfwSwapBuffers(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.window);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <a class="code" href="namespace_graphics.html#aee9d5e3358172aa7708ed2619fa13b03">pause</a> = <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.pause;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;}</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00276"></a><span class="lineno"><a class="line" href="namespace_graphics.html#afd0dafea0bf21b26f60f77e33e5412c9">  276</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespace_graphics.html#afd0dafea0bf21b26f60f77e33e5412c9">keyCallback</a>(GLFWwindow* <a class="code" href="namespace_graphics.html#a2c4e01da45cd9ecd71abc55a7c465db7">window</a>, <span class="keywordtype">int</span> key, <span class="keywordtype">int</span>, <span class="keywordtype">int</span> action, <span class="keywordtype">int</span>)</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;{ </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="preprocessor">#if 0 </span><span class="comment">// Movement. Disabled for now. </span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordflow">if</span> (key == GLFW_KEY_S &amp;&amp; (action == GLFW_REPEAT || action == GLFW_PRESS))</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.cam_pos -= 0.1f * <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.dir;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordflow">if</span> (key == GLFW_KEY_W &amp;&amp; (action == GLFW_REPEAT || action == GLFW_PRESS))</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.cam_pos += 0.1f * <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.dir;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordflow">if</span> (key == GLFW_KEY_A &amp;&amp; (action == GLFW_REPEAT || action == GLFW_PRESS))</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.cam_pos -= 0.1f * <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.right;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordflow">if</span> (key == GLFW_KEY_D &amp;&amp; (action == GLFW_REPEAT || action == GLFW_PRESS))</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.cam_pos += 0.1f * <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.right;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordflow">if</span> (key == GLFW_KEY_Q &amp;&amp; (action == GLFW_REPEAT || action == GLFW_PRESS))</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.cam_pos -= 0.1f * <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.up;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordflow">if</span> (key == GLFW_KEY_E &amp;&amp; (action == GLFW_REPEAT || action == GLFW_PRESS))</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.cam_pos += 0.1f * <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.up;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="preprocessor">#endif </span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordflow">if</span> (key == GLFW_KEY_ESCAPE &amp;&amp; action == GLFW_PRESS)</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        glfwSetWindowShouldClose(<a class="code" href="namespace_graphics.html#a2c4e01da45cd9ecd71abc55a7c465db7">window</a>, 1);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (key == GLFW_KEY_SPACE &amp;&amp; action == GLFW_PRESS)</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.pause) <span class="comment">// disable cursor</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            glfwSetInputMode(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.window, GLFW_CURSOR, GLFW_CURSOR_DISABLED);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        <span class="keywordflow">else</span> <span class="comment">// enable cursor</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            glfwSetInputMode(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.window, GLFW_CURSOR, GLFW_CURSOR_NORMAL);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.pause = !<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.pause; <span class="comment">// Toggle pause</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.pause)</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        {</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            <a class="code" href="namespace_graphics.html#ae6b6f7cd59a0c2c82ae32939b7fda5be">set_window_title</a>(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.title.c_str());</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.replay = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        }</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            <a class="code" href="namespace_graphics.html#ae6b6f7cd59a0c2c82ae32939b7fda5be">set_window_title</a>((<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.title + <span class="stringliteral">&quot; ( PAUSED ) &quot;</span>).c_str());</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        }</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (key == GLFW_KEY_R &amp;&amp; action == GLFW_PRESS)</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.rotate = !<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.rotate; <span class="comment">// Toggle rotation</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.pause &amp;&amp; key == GLFW_KEY_T &amp;&amp; action == GLFW_PRESS) <span class="comment">// Can only replay when paused! </span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    {</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.replay = !<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.replay; <span class="comment">// Toggle replay</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.replay)</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            <a class="code" href="namespace_graphics.html#ae6b6f7cd59a0c2c82ae32939b7fda5be">set_window_title</a>((<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.title + <span class="stringliteral">&quot; ( PAUSED ) ( REPLAY MODE ) -0&quot;</span>).c_str());</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            <a class="code" href="namespace_graphics.html#ae6b6f7cd59a0c2c82ae32939b7fda5be">set_window_title</a>((<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.title + <span class="stringliteral">&quot; ( PAUSED ) &quot;</span>).c_str());</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    }</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  </div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.replay)</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        <span class="keywordflow">if</span>(key == GLFW_KEY_UP &amp;&amp; (action == GLFW_REPEAT || action == GLFW_PRESS))</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.replay_buffer.move_N_frames(1); <span class="comment">// Fast forward replay one frame</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (key == GLFW_KEY_DOWN &amp;&amp; (action == GLFW_REPEAT || action == GLFW_PRESS))</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.replay_buffer.move_N_frames(-1); <span class="comment">// Rewind replay one frame</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <a class="code" href="namespace_graphics.html#ae6b6f7cd59a0c2c82ae32939b7fda5be">set_window_title</a>((<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.title + <span class="stringliteral">&quot; ( PAUSED ) ( REPLAY MODE ) -&quot;</span> + std::to_string(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.replay_buffer.frame_rewind_idx)).c_str());</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    }</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160; </div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (key == GLFW_KEY_RIGHT &amp;&amp; (action == GLFW_REPEAT || action == GLFW_PRESS))</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.slice_index += 1;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (key == GLFW_KEY_LEFT &amp;&amp; (action == GLFW_REPEAT || action == GLFW_PRESS))</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.slice_index -= 1;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;}</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160; </div>
<div class="line"><a name="l00338"></a><span class="lineno"><a class="line" href="namespace_graphics.html#ac7a006bf9e1239b93aad7ace22d31202">  338</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespace_graphics.html#ac7a006bf9e1239b93aad7ace22d31202">scrollCallback</a>(GLFWwindow* <a class="code" href="namespace_graphics.html#a2c4e01da45cd9ecd71abc55a7c465db7">window</a>, <span class="keywordtype">double</span> xoffset, <span class="keywordtype">double</span> yoffset)</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;{</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keywordtype">double</span> zoom_factor{ yoffset &lt; 0.0 ? 1.05 : 0.95 };</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.cam_pos *= zoom_factor;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.view = glm::lookAt(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.cam_pos, glm::vec3(0.0f, 0.0f, 0.0f), glm::vec3(0.0f, 1.0f, 0.0f));</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;}</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160; </div>
<div class="line"><a name="l00345"></a><span class="lineno"><a class="line" href="namespace_graphics.html#af848177c07186316af6df762e5b7409f">  345</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="namespace_graphics.html#af848177c07186316af6df762e5b7409f">setup</a>(<span class="keywordtype">float</span>*&amp; <a class="code" href="namespace_graphics.html#aeac6d0338cc1cfdb0b4c83742bf25479">voltages</a>, <span class="keywordtype">float</span> <span class="keyword">const</span>* positions, <span class="keywordtype">size_t</span> N, <span class="keywordtype">size_t</span> render_N)</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;{</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    {</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.world_min = glm::vec3(-1.0);</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.world_max = glm::vec3(1.0f);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160; </div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <span class="comment">// setup render points </span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        <span class="keywordtype">int</span> render_sparsity{ (int)N / (<span class="keywordtype">int</span>)render_N };</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.points.resize(render_N);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="plot__averaged_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="plot__averaged_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; render_N; ++<a class="code" href="plot__averaged_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>)</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.points[<a class="code" href="plot__averaged_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = ((glm::vec3*)positions)[<a class="code" href="plot__averaged_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> * render_sparsity];</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160; </div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        cout &lt;&lt; <span class="stringliteral">&quot;Number of points: &quot;</span> &lt;&lt; N &lt;&lt; endl;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        cout &lt;&lt; <span class="stringliteral">&quot;Number of points for rendering: &quot;</span> &lt;&lt; render_N &lt;&lt; endl;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160; </div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.voltages.resize(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.points.size(), 0.0f);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <a class="code" href="namespace_graphics.html#a8f249fa225e018430ea622e24c50da10">startup</a>(1200, 1080, <span class="stringliteral">&quot;Neurons Viz!&quot;</span>);</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;     </div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <span class="comment">// Compile shaders for texture and voltages.</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <a class="code" href="namespace_graphics.html#a85f34bbe6b3225c4ba15bf9b5b961da8">initShaders</a>(<span class="stringliteral">&quot;Shaders/vert.glsl&quot;</span>, <span class="stringliteral">&quot;Shaders/frag.glsl&quot;</span>, <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.shaderProgram);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <a class="code" href="namespace_graphics.html#a85f34bbe6b3225c4ba15bf9b5b961da8">initShaders</a>(<span class="stringliteral">&quot;Shaders/tex_vert.glsl&quot;</span>, <span class="stringliteral">&quot;Shaders/tex_frag.glsl&quot;</span>, <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.tex_shaderProgram);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160; </div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        <span class="comment">// Get locations of uniforms and attributes. </span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <span class="comment">// Note that we assume p_mat_loc, v_mat_loc and m_mat_loc are same for tex shader and normal shader</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.voltage_loc = glGetAttribLocation(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.shaderProgram, <span class="stringliteral">&quot;voltage&quot;</span>);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.pos_loc = glGetAttribLocation(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.shaderProgram, <span class="stringliteral">&quot;position&quot;</span>);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.p_mat_loc = glGetUniformLocation(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.shaderProgram, <span class="stringliteral">&quot;pMat&quot;</span>);</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.v_mat_loc = glGetUniformLocation(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.shaderProgram, <span class="stringliteral">&quot;vMat&quot;</span>);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.m_mat_loc = glGetUniformLocation(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.shaderProgram, <span class="stringliteral">&quot;mMat&quot;</span>);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.tex_coord_loc = glGetAttribLocation(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.tex_shaderProgram, <span class="stringliteral">&quot;tex_coords&quot;</span>);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.sampler_loc = glGetUniformLocation(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.tex_shaderProgram, <span class="stringliteral">&quot;tex&quot;</span>);</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160; </div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <span class="comment">// Load vertices into buffers. Also load uniform buffer.</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        GLuint <a class="code" href="namespace_graphics.html#a926548a0197979d6a1b32141bc150df7">vao</a>;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        glGenVertexArrays(1, &amp;<a class="code" href="namespace_graphics.html#a926548a0197979d6a1b32141bc150df7">vao</a>);</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        glBindVertexArray(<a class="code" href="namespace_graphics.html#a926548a0197979d6a1b32141bc150df7">vao</a>);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160; </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        glGenBuffers(1, &amp;<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.pos_buff);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        glBindBuffer(GL_ARRAY_BUFFER, <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.pos_buff);</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        glBufferData(GL_ARRAY_BUFFER,</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.points.size() * <span class="keyword">sizeof</span>(glm::vec3),</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.points.data(),</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                GL_DYNAMIC_DRAW);</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160; </div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        glVertexAttribPointer(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.pos_loc, 3, GL_FLOAT, GL_FALSE, 0, NULL);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        glEnableVertexAttribArray(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.pos_loc);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        glGenBuffers(1, &amp;<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.voltage_buff);</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        glBindBuffer(GL_ARRAY_BUFFER, <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.voltage_buff);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        glBufferData(GL_ARRAY_BUFFER,</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.voltages.size() * <span class="keyword">sizeof</span>(GLfloat),</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.voltages.data(),</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                GL_DYNAMIC_DRAW);</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160; </div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160; </div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <span class="comment">// Generate texture</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        glGenTextures(1, &amp;<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.texture);</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    }</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="comment">// Init projection, view, model matrices</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.projection = glm::perspective(glm::radians(45.0f),(GLfloat)<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.width/<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.height, 0.1f, 1000.0f); </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.view = glm::lookAt(glm::vec3(90.0f, 0, 0), glm::vec3(0, 0, 0), glm::vec3(0, 1, 0)); </div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordtype">float</span> scalar{ 30.0f };</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.model = glm::scale(glm::mat4x4(1.0f), glm::vec3(scalar));</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.cam_pos = glm::vec3(50, 0, 0);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160; </div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    glfwSetKeyCallback(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.window, <a class="code" href="namespace_graphics.html#afd0dafea0bf21b26f60f77e33e5412c9">keyCallback</a>);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    glfwSetScrollCallback(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.window, <a class="code" href="namespace_graphics.html#ac7a006bf9e1239b93aad7ace22d31202">scrollCallback</a>);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160; </div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="comment">// Transparency stuff.</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    glEnable (GL_BLEND); glBlendFunc (GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    glEnable(GL_DEPTH_TEST); glDepthFunc(GL_LESS);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <a class="code" href="namespace_graphics.html#aeac6d0338cc1cfdb0b4c83742bf25479">voltages</a> = <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.voltages.data();</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    glPointSize(2);</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;}</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160; </div>
<div class="line"><a name="l00422"></a><span class="lineno"><a class="line" href="namespace_graphics.html#a04dccd6bb2b0800dee073a1478943d73">  422</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespace_graphics.html#a04dccd6bb2b0800dee073a1478943d73">set_max_raw_video_size</a>(<span class="keywordtype">int</span> <span class="keyword">const</span> size_in_gb)</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;{</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.max_raw_video_size_gb = size_in_gb;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;}</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160; </div>
<div class="line"><a name="l00427"></a><span class="lineno"><a class="line" href="namespace_graphics.html#ab50e7a72d8c39bac06a7ecd9518997b2">  427</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespace_graphics.html#ab50e7a72d8c39bac06a7ecd9518997b2">write_frame</a>(FILE* out, uint8_t* data)</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;{</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordtype">int</span> w{ (int)<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.width }, h{ (int)<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.height };</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    glReadPixels(0, 0, w, h, GL_RGB, GL_UNSIGNED_BYTE, data);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="comment">// invert along y-axis</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="plot__averaged_8m.html#aa9b4a652922d86915477b2e4eb323a58">y</a> = 0; <a class="code" href="plot__averaged_8m.html#aa9b4a652922d86915477b2e4eb323a58">y</a> &lt; h / 2; ++<a class="code" href="plot__averaged_8m.html#aa9b4a652922d86915477b2e4eb323a58">y</a>)</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; w; ++x)</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> chan = 0; chan &lt; 3; ++chan)</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                std::swap(data[3 * (<a class="code" href="plot__averaged_8m.html#aa9b4a652922d86915477b2e4eb323a58">y</a>*w + x) + chan], data[3 * ((h - 1 - <a class="code" href="plot__averaged_8m.html#aa9b4a652922d86915477b2e4eb323a58">y</a>)*w + x) + chan]);</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160; </div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="comment">// Calculate size of file after it will be written to.</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.raw_video_frame_idx += 1;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keywordtype">size_t</span> sz_in_bytes = w * h * 3 * <span class="keyword">sizeof</span>(uint8_t) * <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.raw_video_frame_idx;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="keywordtype">int</span> <span class="keyword">const</span> sz_in_gb = (<span class="keywordtype">int</span>)(sz_in_bytes / 1e9);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keywordflow">if</span> (sz_in_gb &gt;= <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.max_raw_video_size_gb)</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    {</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="comment">// Convert file to mov using batch file script.</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        system((<span class="stringliteral">&quot;convert.bat &quot;</span> + std::to_string(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.mov_video_idx)).c_str());</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.mov_video_idx += 1;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160; </div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        <span class="comment">// Go back to start of raw data file. </span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        fseek(out, 0, SEEK_SET);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.raw_video_frame_idx = 0;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    }</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160; </div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    fwrite(data, <span class="keyword">sizeof</span>(uint8_t), w*h*3, out);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;}</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160; </div>
<div class="line"><a name="l00455"></a><span class="lineno"><a class="line" href="namespace_graphics.html#afe02b5b7f8fc41ade780e5d6b19dff04">  455</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespace_graphics.html#afe02b5b7f8fc41ade780e5d6b19dff04">setup_replay</a>(<span class="keywordtype">int</span> frame_cache_count)</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;{</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.replay_buffer.init((<span class="keywordtype">int</span>)<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.points.size(), frame_cache_count);</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;}</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160; </div>
<div class="line"><a name="l00460"></a><span class="lineno"><a class="line" href="namespace_graphics.html#af63c3027f1615562a427b492b388eda9">  460</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespace_graphics.html#af63c3027f1615562a427b492b388eda9">record_for_replay</a> (<span class="keywordtype">float</span> <span class="keyword">const</span>* <a class="code" href="namespace_graphics.html#aeac6d0338cc1cfdb0b4c83742bf25479">voltages</a>)</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;{</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.replay_buffer.write_frame(<a class="code" href="namespace_graphics.html#aeac6d0338cc1cfdb0b4c83742bf25479">voltages</a>);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;}</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160; </div>
<div class="line"><a name="l00465"></a><span class="lineno"><a class="line" href="namespace_graphics.html#a32c6c59f14635a4d5e040008333e02cb">  465</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespace_graphics.html#a32c6c59f14635a4d5e040008333e02cb">terminate_graphics</a> ()</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;{</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    glfwTerminate();</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;}</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160; </div>
<div class="line"><a name="l00470"></a><span class="lineno"><a class="line" href="namespace_graphics.html#ae6b6f7cd59a0c2c82ae32939b7fda5be">  470</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespace_graphics.html#ae6b6f7cd59a0c2c82ae32939b7fda5be">set_window_title</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="namespace_graphics.html#ad6a7e8662921598c7d8441ea97d19e56">title</a>) { glfwSetWindowTitle(<a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.window, <a class="code" href="namespace_graphics.html#ad6a7e8662921598c7d8441ea97d19e56">title</a>); }</div>
<div class="line"><a name="l00471"></a><span class="lineno"><a class="line" href="namespace_graphics.html#ab386c59ec870be824ae2981180fc2936">  471</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="namespace_graphics.html#ab386c59ec870be824ae2981180fc2936">get_width</a>() { <span class="keywordflow">return</span> <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.width; }</div>
<div class="line"><a name="l00472"></a><span class="lineno"><a class="line" href="namespace_graphics.html#a50630ff4ac2b47955a5480967fc3e56e">  472</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="namespace_graphics.html#a50630ff4ac2b47955a5480967fc3e56e">get_height</a>() { <span class="keywordflow">return</span> <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.height; }</div>
<div class="line"><a name="l00473"></a><span class="lineno"><a class="line" href="namespace_graphics.html#ab1602f2e4b7a7329cc8e11e6018427de">  473</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="namespace_graphics.html#ab1602f2e4b7a7329cc8e11e6018427de">get_slice_index</a>() { <span class="keywordflow">return</span> <a class="code" href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">g_attrs</a>.slice_index; }</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160; </div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;}; <span class="comment">// Graphics namespacew</span></div>
<div class="ttc" id="agraphics_8h_html"><div class="ttname"><a href="graphics_8h.html">graphics.h</a></div></div>
<div class="ttc" id="anamespace_graphics_html"><div class="ttname"><a href="namespace_graphics.html">Graphics</a></div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00021">graphics.cpp:22</a></div></div>
<div class="ttc" id="anamespace_graphics_html_a020afe678b17fb21faf7042a9e2e28f2"><div class="ttname"><a href="namespace_graphics.html#a020afe678b17fb21faf7042a9e2e28f2">Graphics::tex_shaderProgram</a></div><div class="ttdeci">GLuint tex_shaderProgram</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00066">graphics.cpp:66</a></div></div>
<div class="ttc" id="anamespace_graphics_html_a0411bf5e304baaf3df72555018c26e6e"><div class="ttname"><a href="namespace_graphics.html#a0411bf5e304baaf3df72555018c26e6e">Graphics::shaderProgram</a></div><div class="ttdeci">GLuint shaderProgram</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00066">graphics.cpp:66</a></div></div>
<div class="ttc" id="anamespace_graphics_html_a04dccd6bb2b0800dee073a1478943d73"><div class="ttname"><a href="namespace_graphics.html#a04dccd6bb2b0800dee073a1478943d73">Graphics::set_max_raw_video_size</a></div><div class="ttdeci">void set_max_raw_video_size(int const size_in_gb)</div><div class="ttdoc">Sets size of maximum raw video size. If we exceed this, the raw video is converted to an mp4 and over...</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00422">graphics.cpp:422</a></div></div>
<div class="ttc" id="anamespace_graphics_html_a07250250044387fd398c3bec897a167a"><div class="ttname"><a href="namespace_graphics.html#a07250250044387fd398c3bec897a167a">Graphics::raw_video_frame_idx</a></div><div class="ttdeci">int raw_video_frame_idx</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00084">graphics.cpp:84</a></div></div>
<div class="ttc" id="anamespace_graphics_html_a0920e10e3618cd0f9b0bc786dd02050f"><div class="ttname"><a href="namespace_graphics.html#a0920e10e3618cd0f9b0bc786dd02050f">Graphics::theta</a></div><div class="ttdeci">glm::vec2 theta</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00072">graphics.cpp:72</a></div></div>
<div class="ttc" id="anamespace_graphics_html_a185ddee13790b94dd8edbb02eb0d7720"><div class="ttname"><a href="namespace_graphics.html#a185ddee13790b94dd8edbb02eb0d7720">Graphics::cam_pos</a></div><div class="ttdeci">glm::vec3 cam_pos</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00069">graphics.cpp:69</a></div></div>
<div class="ttc" id="anamespace_graphics_html_a1ca24fa11525e0f65df6892fedb19eee"><div class="ttname"><a href="namespace_graphics.html#a1ca24fa11525e0f65df6892fedb19eee">Graphics::p_mat_loc</a></div><div class="ttdeci">GLint p_mat_loc</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00080">graphics.cpp:80</a></div></div>
<div class="ttc" id="anamespace_graphics_html_a25de7c3762e3f43795930ff04caef37a"><div class="ttname"><a href="namespace_graphics.html#a25de7c3762e3f43795930ff04caef37a">Graphics::tex_coord_loc</a></div><div class="ttdeci">GLint tex_coord_loc</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00079">graphics.cpp:79</a></div></div>
<div class="ttc" id="anamespace_graphics_html_a298e89da0de163d5082b5cd9181afbe6"><div class="ttname"><a href="namespace_graphics.html#a298e89da0de163d5082b5cd9181afbe6">Graphics::sampler_loc</a></div><div class="ttdeci">GLint sampler_loc</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00080">graphics.cpp:80</a></div></div>
<div class="ttc" id="anamespace_graphics_html_a2c4e01da45cd9ecd71abc55a7c465db7"><div class="ttname"><a href="namespace_graphics.html#a2c4e01da45cd9ecd71abc55a7c465db7">Graphics::window</a></div><div class="ttdeci">GLFWwindow * window</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00068">graphics.cpp:68</a></div></div>
<div class="ttc" id="anamespace_graphics_html_a32c6c59f14635a4d5e040008333e02cb"><div class="ttname"><a href="namespace_graphics.html#a32c6c59f14635a4d5e040008333e02cb">Graphics::terminate_graphics</a></div><div class="ttdeci">void terminate_graphics()</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00465">graphics.cpp:465</a></div></div>
<div class="ttc" id="anamespace_graphics_html_a3f80ec74ff32a99c69e3a1a1d58445c4"><div class="ttname"><a href="namespace_graphics.html#a3f80ec74ff32a99c69e3a1a1d58445c4">Graphics::loadInShader</a></div><div class="ttdeci">GLuint loadInShader(GLenum const &amp;shaderType, char const *fname)</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00094">graphics.cpp:94</a></div></div>
<div class="ttc" id="anamespace_graphics_html_a50630ff4ac2b47955a5480967fc3e56e"><div class="ttname"><a href="namespace_graphics.html#a50630ff4ac2b47955a5480967fc3e56e">Graphics::get_height</a></div><div class="ttdeci">int get_height()</div><div class="ttdoc">helper function</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00472">graphics.cpp:472</a></div></div>
<div class="ttc" id="anamespace_graphics_html_a542e7802c7ba028558c021006594dd77"><div class="ttname"><a href="namespace_graphics.html#a542e7802c7ba028558c021006594dd77">Graphics::points</a></div><div class="ttdeci">vector&lt; glm::vec3 &gt; points</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00090">graphics.cpp:90</a></div></div>
<div class="ttc" id="anamespace_graphics_html_a5541197fd0e01b42659f7f2594ed61de"><div class="ttname"><a href="namespace_graphics.html#a5541197fd0e01b42659f7f2594ed61de">Graphics::pos_buff</a></div><div class="ttdeci">GLuint pos_buff</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00082">graphics.cpp:82</a></div></div>
<div class="ttc" id="anamespace_graphics_html_a5ce068520d6baf26424579751773dadf"><div class="ttname"><a href="namespace_graphics.html#a5ce068520d6baf26424579751773dadf">Graphics::replay_buffer</a></div><div class="ttdeci">ReplayBuffer replay_buffer</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00076">graphics.cpp:76</a></div></div>
<div class="ttc" id="anamespace_graphics_html_a6fae45b0ee3e217458c0660d79df963d"><div class="ttname"><a href="namespace_graphics.html#a6fae45b0ee3e217458c0660d79df963d">Graphics::width</a></div><div class="ttdeci">GLint width</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00064">graphics.cpp:64</a></div></div>
<div class="ttc" id="anamespace_graphics_html_a708ace3d70b94657d9f603134cf99bd8"><div class="ttname"><a href="namespace_graphics.html#a708ace3d70b94657d9f603134cf99bd8">Graphics::pos_loc</a></div><div class="ttdeci">GLint pos_loc</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00079">graphics.cpp:79</a></div></div>
<div class="ttc" id="anamespace_graphics_html_a73ac182774a7c6d902cc078bacd5842f"><div class="ttname"><a href="namespace_graphics.html#a73ac182774a7c6d902cc078bacd5842f">Graphics::g_attrs</a></div><div class="ttdeci">struct Graphics::@0 g_attrs</div></div>
<div class="ttc" id="anamespace_graphics_html_a7955aba28102ad572e43724f8b368860"><div class="ttname"><a href="namespace_graphics.html#a7955aba28102ad572e43724f8b368860">Graphics::replay</a></div><div class="ttdeci">bool replay</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00073">graphics.cpp:73</a></div></div>
<div class="ttc" id="anamespace_graphics_html_a7add95f36038e655dea6e2213f4533ef"><div class="ttname"><a href="namespace_graphics.html#a7add95f36038e655dea6e2213f4533ef">Graphics::texture</a></div><div class="ttdeci">GLuint texture</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00067">graphics.cpp:67</a></div></div>
<div class="ttc" id="anamespace_graphics_html_a7d5b0e2f900f864820c9e1c2bcf5f309"><div class="ttname"><a href="namespace_graphics.html#a7d5b0e2f900f864820c9e1c2bcf5f309">Graphics::shutdown</a></div><div class="ttdeci">void shutdown()</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00180">graphics.cpp:180</a></div></div>
<div class="ttc" id="anamespace_graphics_html_a85781c7fcd6555318df976123c7e1531"><div class="ttname"><a href="namespace_graphics.html#a85781c7fcd6555318df976123c7e1531">Graphics::slice_index</a></div><div class="ttdeci">int slice_index</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00091">graphics.cpp:91</a></div></div>
<div class="ttc" id="anamespace_graphics_html_a85f34bbe6b3225c4ba15bf9b5b961da8"><div class="ttname"><a href="namespace_graphics.html#a85f34bbe6b3225c4ba15bf9b5b961da8">Graphics::initShaders</a></div><div class="ttdeci">void initShaders(char const *vertLoc, char const *fragLoc, GLuint &amp;shader_prog)</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00134">graphics.cpp:134</a></div></div>
<div class="ttc" id="anamespace_graphics_html_a8cc2b613e01468cd06738e6aabfbb233"><div class="ttname"><a href="namespace_graphics.html#a8cc2b613e01468cd06738e6aabfbb233">Graphics::max_raw_video_size_gb</a></div><div class="ttdeci">int max_raw_video_size_gb</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00085">graphics.cpp:85</a></div></div>
<div class="ttc" id="anamespace_graphics_html_a8f249fa225e018430ea622e24c50da10"><div class="ttname"><a href="namespace_graphics.html#a8f249fa225e018430ea622e24c50da10">Graphics::startup</a></div><div class="ttdeci">void startup(GLfloat const &amp;width, GLfloat const &amp;height, const char *title=&quot;Untitled Window&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00150">graphics.cpp:150</a></div></div>
<div class="ttc" id="anamespace_graphics_html_a926548a0197979d6a1b32141bc150df7"><div class="ttname"><a href="namespace_graphics.html#a926548a0197979d6a1b32141bc150df7">Graphics::vao</a></div><div class="ttdeci">GLuint vao</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00063">graphics.cpp:63</a></div></div>
<div class="ttc" id="anamespace_graphics_html_a9b1323ae2d49ae44378a3c5de5b5ad82"><div class="ttname"><a href="namespace_graphics.html#a9b1323ae2d49ae44378a3c5de5b5ad82">Graphics::voltage_loc</a></div><div class="ttdeci">GLint voltage_loc</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00079">graphics.cpp:79</a></div></div>
<div class="ttc" id="anamespace_graphics_html_aaac526707d0445cd43be73708b318d91"><div class="ttname"><a href="namespace_graphics.html#aaac526707d0445cd43be73708b318d91">Graphics::world_max</a></div><div class="ttdeci">glm::vec3 world_max</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00074">graphics.cpp:74</a></div></div>
<div class="ttc" id="anamespace_graphics_html_ab1602f2e4b7a7329cc8e11e6018427de"><div class="ttname"><a href="namespace_graphics.html#ab1602f2e4b7a7329cc8e11e6018427de">Graphics::get_slice_index</a></div><div class="ttdeci">int get_slice_index()</div><div class="ttdoc">helper function</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00473">graphics.cpp:473</a></div></div>
<div class="ttc" id="anamespace_graphics_html_ab386c59ec870be824ae2981180fc2936"><div class="ttname"><a href="namespace_graphics.html#ab386c59ec870be824ae2981180fc2936">Graphics::get_width</a></div><div class="ttdeci">int get_width()</div><div class="ttdoc">helper function</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00471">graphics.cpp:471</a></div></div>
<div class="ttc" id="anamespace_graphics_html_ab50e7a72d8c39bac06a7ecd9518997b2"><div class="ttname"><a href="namespace_graphics.html#ab50e7a72d8c39bac06a7ecd9518997b2">Graphics::write_frame</a></div><div class="ttdeci">void write_frame(FILE *out, uint8_t *data)</div><div class="ttdoc">Writes a frame to raw video file. If file size starts to exceed limit, it is converted to an mp4 and ...</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00427">graphics.cpp:427</a></div></div>
<div class="ttc" id="anamespace_graphics_html_ab9b7d01516fea5a69f0082a9a7aa4602"><div class="ttname"><a href="namespace_graphics.html#ab9b7d01516fea5a69f0082a9a7aa4602">Graphics::mouse</a></div><div class="ttdeci">glm::vec2 mouse</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00071">graphics.cpp:71</a></div></div>
<div class="ttc" id="anamespace_graphics_html_abd7a23a5907242aebce938e7f25d8742"><div class="ttname"><a href="namespace_graphics.html#abd7a23a5907242aebce938e7f25d8742">Graphics::height</a></div><div class="ttdeci">GLint height</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00064">graphics.cpp:64</a></div></div>
<div class="ttc" id="anamespace_graphics_html_ac7a006bf9e1239b93aad7ace22d31202"><div class="ttname"><a href="namespace_graphics.html#ac7a006bf9e1239b93aad7ace22d31202">Graphics::scrollCallback</a></div><div class="ttdeci">void scrollCallback(GLFWwindow *window, double xoffset, double yoffset)</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00338">graphics.cpp:338</a></div></div>
<div class="ttc" id="anamespace_graphics_html_acef47ff2fb5bb5de0df186a57b236947"><div class="ttname"><a href="namespace_graphics.html#acef47ff2fb5bb5de0df186a57b236947">Graphics::model</a></div><div class="ttdeci">glm::mat4 model</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00070">graphics.cpp:70</a></div></div>
<div class="ttc" id="anamespace_graphics_html_acf2724be7a18e8148883bb0629e5ca3c"><div class="ttname"><a href="namespace_graphics.html#acf2724be7a18e8148883bb0629e5ca3c">Graphics::m_mat_loc</a></div><div class="ttdeci">GLint m_mat_loc</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00080">graphics.cpp:80</a></div></div>
<div class="ttc" id="anamespace_graphics_html_ad0df1f87f07a495f173209798489ac3c"><div class="ttname"><a href="namespace_graphics.html#ad0df1f87f07a495f173209798489ac3c">Graphics::v_mat_loc</a></div><div class="ttdeci">GLint v_mat_loc</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00080">graphics.cpp:80</a></div></div>
<div class="ttc" id="anamespace_graphics_html_ad3011b92c61f085457eb9c325f12b8ee"><div class="ttname"><a href="namespace_graphics.html#ad3011b92c61f085457eb9c325f12b8ee">Graphics::voltage_buff</a></div><div class="ttdeci">GLuint voltage_buff</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00082">graphics.cpp:82</a></div></div>
<div class="ttc" id="anamespace_graphics_html_ad6a7e8662921598c7d8441ea97d19e56"><div class="ttname"><a href="namespace_graphics.html#ad6a7e8662921598c7d8441ea97d19e56">Graphics::title</a></div><div class="ttdeci">std::string title</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00065">graphics.cpp:65</a></div></div>
<div class="ttc" id="anamespace_graphics_html_adeac8ca48fc961dc219ee5e6dbdd95f5"><div class="ttname"><a href="namespace_graphics.html#adeac8ca48fc961dc219ee5e6dbdd95f5">Graphics::world_min</a></div><div class="ttdeci">glm::vec3 world_min</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00074">graphics.cpp:74</a></div></div>
<div class="ttc" id="anamespace_graphics_html_adeec2db5ee6c6115b9717d264566a7ea"><div class="ttname"><a href="namespace_graphics.html#adeec2db5ee6c6115b9717d264566a7ea">Graphics::mov_video_idx</a></div><div class="ttdeci">int mov_video_idx</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00086">graphics.cpp:86</a></div></div>
<div class="ttc" id="anamespace_graphics_html_ae6b6f7cd59a0c2c82ae32939b7fda5be"><div class="ttname"><a href="namespace_graphics.html#ae6b6f7cd59a0c2c82ae32939b7fda5be">Graphics::set_window_title</a></div><div class="ttdeci">void set_window_title(const char *title)</div><div class="ttdoc">replay utilities. Allows user to record a replay of voltages and replay it.</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00470">graphics.cpp:470</a></div></div>
<div class="ttc" id="anamespace_graphics_html_aea7ddd4a13b7d44d6563501e86ee80cc"><div class="ttname"><a href="namespace_graphics.html#aea7ddd4a13b7d44d6563501e86ee80cc">Graphics::view</a></div><div class="ttdeci">glm::mat4 view</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00070">graphics.cpp:70</a></div></div>
<div class="ttc" id="anamespace_graphics_html_aeac6d0338cc1cfdb0b4c83742bf25479"><div class="ttname"><a href="namespace_graphics.html#aeac6d0338cc1cfdb0b4c83742bf25479">Graphics::voltages</a></div><div class="ttdeci">vector&lt; GLfloat &gt; voltages</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00089">graphics.cpp:89</a></div></div>
<div class="ttc" id="anamespace_graphics_html_aeb133f8d106cd2c94bcc69d2cb9f559d"><div class="ttname"><a href="namespace_graphics.html#aeb133f8d106cd2c94bcc69d2cb9f559d">Graphics::projection</a></div><div class="ttdeci">glm::mat4 projection</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00070">graphics.cpp:70</a></div></div>
<div class="ttc" id="anamespace_graphics_html_aee40062a09c568db2ef73f402d6c0207"><div class="ttname"><a href="namespace_graphics.html#aee40062a09c568db2ef73f402d6c0207">Graphics::rotate</a></div><div class="ttdeci">bool rotate</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00073">graphics.cpp:73</a></div></div>
<div class="ttc" id="anamespace_graphics_html_aee9d5e3358172aa7708ed2619fa13b03"><div class="ttname"><a href="namespace_graphics.html#aee9d5e3358172aa7708ed2619fa13b03">Graphics::pause</a></div><div class="ttdeci">bool pause</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00073">graphics.cpp:73</a></div></div>
<div class="ttc" id="anamespace_graphics_html_aeee17015cfc742e0670bae836aa799b6"><div class="ttname"><a href="namespace_graphics.html#aeee17015cfc742e0670bae836aa799b6">Graphics::tex_coord_buff</a></div><div class="ttdeci">GLuint tex_coord_buff</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00082">graphics.cpp:82</a></div></div>
<div class="ttc" id="anamespace_graphics_html_af3b5a4f3a72653f853b19da001e8356e"><div class="ttname"><a href="namespace_graphics.html#af3b5a4f3a72653f853b19da001e8356e">Graphics::render</a></div><div class="ttdeci">bool render(float const *voltages, void const *slice, int const slice_width, int const slice_height, bool &amp;pause)</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00186">graphics.cpp:186</a></div></div>
<div class="ttc" id="anamespace_graphics_html_af63c3027f1615562a427b492b388eda9"><div class="ttname"><a href="namespace_graphics.html#af63c3027f1615562a427b492b388eda9">Graphics::record_for_replay</a></div><div class="ttdeci">void record_for_replay(float const *voltages)</div><div class="ttdoc">replay utilities. Allows user to record a replay of voltages and replay it.</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00460">graphics.cpp:460</a></div></div>
<div class="ttc" id="anamespace_graphics_html_af848177c07186316af6df762e5b7409f"><div class="ttname"><a href="namespace_graphics.html#af848177c07186316af6df762e5b7409f">Graphics::setup</a></div><div class="ttdeci">int setup(float *&amp;voltages, float const *positions, size_t N, size_t render_N)</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00345">graphics.cpp:345</a></div></div>
<div class="ttc" id="anamespace_graphics_html_afd0dafea0bf21b26f60f77e33e5412c9"><div class="ttname"><a href="namespace_graphics.html#afd0dafea0bf21b26f60f77e33e5412c9">Graphics::keyCallback</a></div><div class="ttdeci">void keyCallback(GLFWwindow *window, int key, int, int action, int)</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00276">graphics.cpp:276</a></div></div>
<div class="ttc" id="anamespace_graphics_html_afe02b5b7f8fc41ade780e5d6b19dff04"><div class="ttname"><a href="namespace_graphics.html#afe02b5b7f8fc41ade780e5d6b19dff04">Graphics::setup_replay</a></div><div class="ttdeci">void setup_replay(int frame_cache_count)</div><div class="ttdoc">replay utilities. Allows user to record a replay of voltages and replay it.</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00455">graphics.cpp:455</a></div></div>
<div class="ttc" id="aplot__averaged_8m_html_a6f6ccfcf58b31cb6412107d9d5281426"><div class="ttname"><a href="plot__averaged_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a></div><div class="ttdeci">for i</div><div class="ttdef"><b>Definition:</b> <a href="plot__averaged_8m_source.html#l00009">plot_averaged.m:9</a></div></div>
<div class="ttc" id="aplot__averaged_8m_html_aa9b4a652922d86915477b2e4eb323a58"><div class="ttname"><a href="plot__averaged_8m.html#aa9b4a652922d86915477b2e4eb323a58">y</a></div><div class="ttdeci">y</div><div class="ttdef"><b>Definition:</b> <a href="plot__averaged_8m_source.html#l00003">plot_averaged.m:3</a></div></div>
<div class="ttc" id="astruct_graphics_1_1_replay_buffer_html"><div class="ttname"><a href="struct_graphics_1_1_replay_buffer.html">Graphics::ReplayBuffer</a></div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00025">graphics.cpp:26</a></div></div>
<div class="ttc" id="astruct_graphics_1_1_replay_buffer_html_a1bb0f5f7fa5a5919f8ae2b453c11c276"><div class="ttname"><a href="struct_graphics_1_1_replay_buffer.html#a1bb0f5f7fa5a5919f8ae2b453c11c276">Graphics::ReplayBuffer::move_N_frames</a></div><div class="ttdeci">void move_N_frames(int N)</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00054">graphics.cpp:54</a></div></div>
<div class="ttc" id="astruct_graphics_1_1_replay_buffer_html_a1f3def10bdd64dff2ad1ee87f155bcb4"><div class="ttname"><a href="struct_graphics_1_1_replay_buffer.html#a1f3def10bdd64dff2ad1ee87f155bcb4">Graphics::ReplayBuffer::voltage_buff</a></div><div class="ttdeci">std::vector&lt; GLfloat &gt; voltage_buff</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00027">graphics.cpp:27</a></div></div>
<div class="ttc" id="astruct_graphics_1_1_replay_buffer_html_a3f4d1d2dd51347e1d14d5d96449b0be3"><div class="ttname"><a href="struct_graphics_1_1_replay_buffer.html#a3f4d1d2dd51347e1d14d5d96449b0be3">Graphics::ReplayBuffer::init</a></div><div class="ttdeci">void init(GLint N, GLint frame_cache_count)</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00031">graphics.cpp:31</a></div></div>
<div class="ttc" id="astruct_graphics_1_1_replay_buffer_html_a451d03012ea2f7a2858a8ba96084869d"><div class="ttname"><a href="struct_graphics_1_1_replay_buffer.html#a451d03012ea2f7a2858a8ba96084869d">Graphics::ReplayBuffer::read_frame</a></div><div class="ttdeci">const GLfloat * read_frame() const</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00049">graphics.cpp:49</a></div></div>
<div class="ttc" id="astruct_graphics_1_1_replay_buffer_html_ab30124032828aec9c5f1042d16316e78"><div class="ttname"><a href="struct_graphics_1_1_replay_buffer.html#ab30124032828aec9c5f1042d16316e78">Graphics::ReplayBuffer::write_frame</a></div><div class="ttdeci">void write_frame(float const *voltages)</div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cpp_source.html#l00042">graphics.cpp:42</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
